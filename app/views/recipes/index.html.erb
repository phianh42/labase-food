# Complete recipes/index.html.erb with Search

```erb
<!-- app/views/recipes/index.html.erb -->
<div class="mb-8">
  <h1 class="text-4xl font-bold uppercase mb-6 border-b-4 border-black pb-2">
    <%= params[:tag].present? ? "Recettes: #{params[:tag]}" : "Recettes" %>
  </h1>
  
  <!-- Simple Search Form -->
  <%= search_form_for @q, url: recipes_path, method: :get, 
      class: "mb-6", 
      html: { id: 'recipe-search-form' } do |f| %>
    
    <div class="border-4 border-black p-4 bg-white">
      <div class="flex gap-4">
        <!-- Single comprehensive search field -->
        <div class="flex-1">
          <%= f.search_field :title_or_description_or_recipe_steps_instruction_or_ingredients_name_or_user_username_cont,
              placeholder: "Rechercher par titre, description, étapes, ingrédients ou auteur...",
              value: params[:q]&.[](:title_or_description_or_recipe_steps_instruction_or_ingredients_name_or_user_username_cont),
              class: "w-full border-2 border-black p-4 text-lg focus:outline-none focus:border-gray-600",
              autofocus: true %>
        </div>
        
        <!-- Search button -->
        <div>
          <%= f.submit "RECHERCHER", 
              class: "border-4 border-black px-8 py-4 text-lg uppercase font-bold hover:bg-black hover:text-white cursor-pointer" %>
        </div>
        
        <!-- Sort dropdown (minimal) -->
        <div class="flex items-center">
          <%= f.select :s,
              options_for_select([
                ['Aléatoire', 'random'],
                ['Plus récent', 'created_at desc'],
                ['Plus ancien', 'created_at asc'],
                ['Titre A-Z', 'title asc'],
                ['Titre Z-A', 'title desc'],
                ['Préparation rapide', 'preparation_time asc']
              ], params[:q]&.[](:s)),
              { include_blank: false },
              { 
                class: "border-2 border-black p-4 text-sm uppercase font-bold",
                onchange: "this.form.submit();"
              } %>
        </div>
      </div>
      
      <!-- Preserve existing filters -->
      <%= hidden_field_tag :tag, params[:tag] if params[:tag].present? %>
      <%= hidden_field_tag :category, params[:category] if params[:category].present? %>
      <%= hidden_field_tag :my_recipes, params[:my_recipes] if params[:my_recipes].present? %>
    </div>
  <% end %>
  
  <!-- Search results info and quick filters -->
  <div class="mb-6 flex justify-between items-center">
    <div class="text-sm uppercase">
      <% if search_active? %>
        <span class="font-bold"><%= @recipes.total_count %> RÉSULTATS</span>
        <% search_term = params[:q][:title_or_description_or_recipe_steps_instruction_or_ingredients_name_or_user_username_cont] %>
        <% if search_term.present? %>
          pour "<span class="font-bold"><%= search_term %></span>"
        <% end %>
        <%= link_to "× EFFACER", recipes_path, class: "ml-2 text-red-600 hover:underline" %>
      <% else %>
        <span><%= @recipes.total_count %> RECETTES AU TOTAL</span>
      <% end %>
    </div>
    
    <!-- Quick filter buttons -->
    <div class="flex gap-2">
      <%= link_to "TOUTES", recipes_path,
          class: "text-sm border-2 border-black px-4 py-2 uppercase font-bold hover:bg-black hover:text-white #{'bg-black text-white' unless params[:tag] || params[:category] || params[:my_recipes]}" %>
      <% if user_signed_in? %>
        <%= link_to "MES RECETTES", recipes_path(my_recipes: true),
            class: "text-sm border-2 border-black px-4 py-2 uppercase font-bold hover:bg-black hover:text-white #{'bg-black text-white' if params[:my_recipes]}" %>
      <% end %>
    </div>
  </div>
</div>

<!-- Search results -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
  <% if @recipes.any? %>
    <% @recipes.each do |recipe| %>
      <div class="border-4 border-black relative">
        <% if params[:my_recipes].present? %>
          <!-- In "My Recipes" view: only show privacy indicator -->
          <% unless recipe.is_public? %>
            <div class="absolute top-2 right-2 z-10">
              <span class="bg-red-600 text-white px-3 py-1 text-xs uppercase font-bold">
                PRIVÉE
              </span>
            </div>
          <% end %>
        <% else %>
          <!-- In public view: show "MA RECETTE" for own recipes -->
          <% if user_signed_in? && recipe.user == current_user %>
            <div class="absolute top-2 right-2 z-10">
              <span class="bg-black text-white px-3 py-1 text-xs uppercase font-bold">
                MA RECETTE
              </span>
            </div>
          <% end %>
        <% end %>
        
        <% if recipe.image.attached? %>
          <%= image_tag recipe.image, class: "w-full h-48 object-cover" %>
        <% else %>
          <div class="w-full h-48 bg-gray-200 flex items-center justify-center">
            <span class="text-4xl uppercase">NO IMAGE</span>
          </div>
        <% end %>
        
        <div class="p-4">
          <h2 class="text-xl font-bold uppercase mb-2">
            <%= link_to recipe.title, recipe, class: "hover:underline" %>
          </h2>
          
          <div class="text-sm uppercase mb-2 text-gray-600">
            PAR <%= link_to recipe.user.username, recipes_path(q: { title_or_description_or_recipe_steps_instruction_or_ingredients_name_or_user_username_cont: recipe.user.username }), 
                    class: "hover:underline text-black" %> 
            | <%= recipe.created_at.strftime("%d/%m/%Y") %>
          </div>
          
          <div class="flex gap-4 text-sm uppercase mb-2">
            <% if recipe.preparation_time.present? %>
              <span>PREP: <%= recipe.preparation_time %>MIN</span>
            <% end %>
            <% if recipe.cooking_time.present? %>
              <span>COOK: <%= recipe.cooking_time %>MIN</span>
            <% end %>
            <% if recipe.difficulty.present? %>
              <span class="<%= difficulty_color_class(recipe.difficulty) %>">
                <%= recipe.difficulty.upcase %>
              </span>
            <% end %>
          </div>
          
          <!-- Recipe description preview (if search matches) -->
          <% if search_active? && recipe.description.present? %>
            <div class="text-sm mb-2 text-gray-700">
              <%= truncate(strip_tags(recipe.description), length: 100) %>
            </div>
          <% end %>
          
          <!-- Recipe tags -->
          <% if recipe.tags.any? %>
            <div class="flex flex-wrap gap-1 mt-2">
              <% recipe.tags.limit(3).each do |tag| %>
                <span class="bg-gray-800 text-white px-2 py-1 text-xs uppercase">
                  <%= link_to tag.name, recipes_path(tag: tag.name), class: "text-white hover:underline" %>
                </span>
              <% end %>
              <% if recipe.tags.count > 3 %>
                <span class="text-xs text-gray-600 px-2 py-1">
                  +<%= recipe.tags.count - 3 %>
                </span>
              <% end %>
            </div>
          <% end %>
          
          <!-- Action buttons for own recipes -->
          <% if user_signed_in? && recipe.user == current_user %>
            <div class="flex gap-2 mt-3">
              <%= link_to "MODIFIER", edit_recipe_path(recipe), 
                  class: "text-xs border border-black px-2 py-1 uppercase hover:bg-black hover:text-white" %>
              <%= link_to "VOIR", recipe, 
                  class: "text-xs border border-gray-600 px-2 py-1 uppercase hover:bg-gray-600 hover:text-white" %>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>
  <% else %>
    <!-- No results -->
    <div class="col-span-full text-center border-4 border-black p-12">
      <h3 class="text-2xl font-bold uppercase mb-4">AUCUNE RECETTE TROUVÉE</h3>
      <% if search_active? %>
        <p class="mb-4">Essayez un autre terme de recherche</p>
        <%= link_to "VOIR TOUTES LES RECETTES", recipes_path,
            class: "border-2 border-black px-6 py-3 uppercase font-bold hover:bg-black hover:text-white" %>
      <% else %>
        <p class="mb-4">Aucune recette disponible</p>
        <% if user_signed_in? %>
          <%= link_to "CRÉER UNE RECETTE", new_recipe_path,
              class: "border-2 border-black px-6 py-3 uppercase font-bold hover:bg-black hover:text-white" %>
        <% end %>
      <% end %>
    </div>
  <% end %>
</div>

<div class="mt-8 flex justify-center">
  <%= paginate @recipes if respond_to?(:paginate) %>
</div>
```
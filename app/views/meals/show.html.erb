<!-- app/views/meals/show.html.erb -->
<div class="max-w-4xl mx-auto">
  <div class="border-4 border-black p-8 mb-8">
    <h1 class="text-4xl font-bold uppercase mb-4"><%= @meal.display_name %></h1>
    
    <div class="flex justify-between items-start mb-6">
      <div>
        <p class="uppercase mb-2">
          <span class="font-bold">GUESTS:</span> <%= @meal.guests.pluck(:name).join(", ") %>
        </p>
      </div>
      <div class="flex gap-2">
        <%= link_to "EDIT", edit_meal_path(@meal), class: "border-2 border-black px-4 py-2 uppercase hover:bg-black hover:text-white" %>
        <%= link_to "DUPLICATE", duplicate_meal_path(@meal), method: :post, 
            class: "border-2 border-black px-4 py-2 uppercase hover:bg-black hover:text-white" %>
        <%= link_to "DELETE", @meal, method: :delete, data: { confirm: "Are you sure?" }, 
            class: "border-2 border-red-600 text-red-600 px-4 py-2 uppercase hover:bg-red-600 hover:text-white" %>
      </div>
    </div>
    
    <% if @meal.notes.present? %>
      <div class="mb-6 p-4 border-2 border-gray-400">
        <p class="uppercase font-bold mb-2">Notes:</p>
        <p><%= @meal.notes %></p>
      </div>
    <% end %>
    
    <div class="space-y-6">
      <% @meal.courses.each do |course| %>
        <div class="border-2 border-black p-4">
          <h3 class="text-xl font-bold uppercase mb-3">
            <%= course.order_number %>. <%= course.name %>
          </h3>
          <div class="space-y-2">
            <% course.course_recipes.includes(:recipe).each do |cr| %>
              <div class="flex justify-between items-start">
                <div>
                  <p class="font-bold">
                    <%= link_to cr.recipe.title, recipe_path(cr.recipe), class: "hover:underline" %>
                  </p>
                  <% if cr.comments.present? %>
                    <p class="text-sm italic ml-4"><%= cr.comments %></p>
                  <% end %>
                </div>
                <span class="text-sm uppercase">
                  BY <%= cr.recipe.user.username %>
                </span>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>

